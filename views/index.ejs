<!-- Define a function to render each book -->
<% function renderBook(book) { %>
<div class="item-preview">
  <a href="/single-book/<%= book._id %>">
    <h2>Book: <%= book.title %></h2>
    <p>Details</p>
  </a>
</div>
<% } %>

<!DOCTYPE html>
<html lang="en">
  <!-- Pass a JavaScript variable to a partial in EJS -->
  <%- include('partials/head.ejs', { title: "Home page" }) %>

  <body>
    <%- include('partials/navbar') %>
    <div style="display: flex;">
      <div class="content">
        <div class="home">
          <div class="item-list">
            <% if (books.length > 0) { %>
            <!-- Call the renderBook function for each book -->
            <% books.forEach(renderBook); %> <% } else { %>
            <p>No books found.</p>
            <% } %>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="create">
          <form action="/addBook" method="POST">
            <h2>Add New Book</h2>
            <label>Title:</label
            ><input type="text" value="" id="title" name="title" required />

            <label for="author">Author:</label>
            <input type="text" id="author" name="author" required /><br />

            <label for="genre">Genre:</label>
            <input type="text" id="genre" name="genre" required /><br />

            <button type="submit">Add Book</button>
          </form>
        </div>
      </div>
    </div>
    <%- include('partials/footer') %>
  </body>
</html>
